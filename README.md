# Geometry-Generation-of-Overflow-and-Venting-Systems-in-Salome-for-Die-Casting-and-Thixomolding

The included scripts (one is for testing creating overflows) generate typical overflows and venting lines in Salome. The function create_overflow creates an overflow with a connector attached to it. The connector is just a straight extruded trapezoid with a draft angle, of course its dimensions may be altered. Tool designers want the metal flow inside the overflow as bad a possible, meaning metal entering the overflow via the connector should not pass directly to the exit of the overflow (the exit of the overflow is the position of venting line), because it would prematurely close the venting line. This way, venting of the tool is very ineffective, thus we want the metal to enter the overflow in such a way it directly 'crashes' into a wall of the overflow. This is what the offset is for, here called of_offset. Running test_overflow.py in Salome illustrates the use of create_overflow() and how of_offset is used. Seven different overflows are created, they look like this (for the image below, they were translated to -Y to separate them from the origin):

![Bildschirmfoto vom 2024-01-18 13-41-29](https://github.com/emefff/Geometry-Generation-of-Overflow-and-Venting-Systems-in-Salome-for-Die-Casting-and-Thixomolding/assets/89903493/1e62e905-b724-4cea-8719-9bcca49d4e33)

For the blue overflow of1_offset1 = [-1, 0, 0], it is centered behind its connector the second of1_offset[1] = 0. Nevertheless, of1_offset1[0] = -1, it means there is an overlap of 1mm. Because the overflow must have a draft angle, you should always use an overlap. Due to the coordinate system used, the overlap must be entered as a negative number (if we had reversed the sign, this might confuse the user). The second number in of1_offset is = 0, which makes a centered overflow. Similarly, the purple overflow features of1_offset1 = [-1, -2, 0] with the same overlap but an overflow shifted to the right. 
The red overflow shows an erroneous input, here of1_offset1 = [-1, 10, 0], the lateral shift of the overflow exceeds its dimensions. Naturally, this is an unusable result, thus the shell will show a "[ValueError] of_offset in y is too large! It can't be larger than  3.5". The maximum offset possible is also printed to the shell. 
The green and the yellow show lateral offsets with this maximum value of +-3.5mm. The last example in this script shows an overlap < 0. This, again, will print an error "[ValueError] con_overlap cannot be smaller than 0." to the shell. However, we do not want to raise a ValueError, because it would interrupt the script.

The second script automated_creation_overflows_and_venting_lines.py creates a full example of how a complete shot with direct gating may look like in Thixomolding. The DUMMY_PART is just a rectangular plate with a thickness of 2.5mm. A simple function create_nozzle_exit creates the typical nozzle exit used in Thixomolding, here it directly connects to the part. This is called 'direct gating', in metal casting, this is only possible in Thixomolding (impossible in die-casting). 
In this script, create_overflow() is also used. The third function used in this script is create_venting_line(). Typically, venting lines are very simple, they are not designed for optimal air flow, because it is very difficult and if air remains in the part, other measures are taken in casting (a simple measure against excess air would be, for example to increas a venting cross section or add an additional venting line). Venting lines are just exruded trapezoids with roundes top edges. This script also adds 'connectors', here they are frustrums with the same cross section as the venting line it belongs to. The created complete shot with dummy part is depicted below:

![Bildschirmfoto vom 2024-01-18 13-55-51](https://github.com/emefff/Geometry-Generation-of-Overflow-and-Venting-Systems-in-Salome-for-Die-Casting-and-Thixomolding/assets/89903493/201ee11c-a37b-4c64-9f68-16b9fece732f)

The generated bodies are limited in tolerance to 1E-3, otherwise Salome does not allow for basic boolean functions like fusing etc. It is very picky about that.
Real tools can be quite complicated with slanted parts, slanted overflow and venting lines and weird parting lines. However, the shared scripts are very easy to use, especially for flat parts and overflows and vents in the XY-plane. In complicated cases, the shared functions might not be super-useful, but can give a first sketch or estimate. Use at your own risk.

emefff@gmx.at
